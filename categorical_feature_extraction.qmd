# Categorical Feature Extraction {#sec-categorical-feature-extraction}

Based on the datasets extracted in the [numerical feature extraction](#sec-numerical-feature-extraction) step, FLIM Playground:

- [merges the datasets](#merging-datasets) into a single dataset
- [assigns categorical features](#assigning-categorical-features) to each cell in the merged dataset

![](extraction_ui_shots/cat.png){width=100% fig-align=center}

## Merging Datasets

It scans the specified folder path and finds all CSV files. It uses the [cell identifier column](data_extraction_config.qmd#cell-identifier) to check for duplicates both within each dataset and across all datasets. 

:::{.callout-important #fov-id-categorical}
**The FOV identifier uniquely identifies a field of view and is assumed to contain all information necessary to extract the categorical features (e.g., treatment, time point, etc.), by including segments separated by a certain delimiter (e.g., `_`). Categorical features are assigned from individual or combinations of segments.** 
:::

Therefore, it checks if all field of view names include the same number of segments to determine the eligibility of [categorical feature assignment](#assigning-categorical-features). 

![](extraction_ui_shots/cat_merge.png){width=60% fig-align=center}

It merges the datasets that pass the checks by finding common columns and vertically concatenating them. 

![](extraction_ui_shots/cat_merge_result.png){width=60% fig-align=center}

## Assigning Categorical Features

Available categorical features to be assigned are drawn from the [user-specified configuration](data_extraction_config.qmd#categorical-features). 

![](extraction_ui_shots/cat_features.png){width=25% fig-align=center}

Based on the [assumptions](#fov-id-categorical), it breaks down the FOV identifier into individual fields and facilitates the assignment. 

![](extraction_ui_shots/cat_slots.png){width=50% fig-align=center}

A live preview of the assignment is displayed. 

![](extraction_ui_shots/cat_slot_assign.png){width=100% fig-align=center}

And the merged dataset with categorical features is available for download. 
